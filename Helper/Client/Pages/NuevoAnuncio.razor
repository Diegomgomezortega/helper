@page "/anuncios/nuevo"

@*Se inyecta el navigation para poder navegar de paginas en pagina*@
@inject NavigationManager navigationManager
@*Se inyecta el http para tener acceso a los servicios de HTTP(tanto get,post,put,delete)*@
@inject IHttpService http




<FormAnuncio onValidSubmit="GrabarNuevo" nuevo="anuncio" onCancel="Cancelar" textobtn1="Guardar Anuncio" textobtn2="Cancelar" onChange="SelectTamano">

</FormAnuncio>

@code {
    //public string txtbtn1 = "Guardar Anuncio";
    //public string txtbtn2 = "Cancelar";
    public string Tamano;


    private Anuncio anuncio = new Anuncio();


    private async Task GrabarNuevo()
    {
        anuncio.FechaAnuncio = DateTime.Now;
        anuncio.UsuarioId = 4;//momentaneo hasta que pueda tomar el id de cada usuario

        var httpRespuesta = await http.Post<Helper.Shared.Data.Entidades.Anuncio>("api/publicaciones", anuncio);
        if (httpRespuesta.Error)
        {
            var body = await httpRespuesta.GetBody();//Sitenemos un error, se va a mostrar
        }
        navigationManager.NavigateTo("/anuncios"); //Luego va a los anuncios

    }
    private void Cancelar()
    {
        navigationManager.NavigateTo("/anuncios");

    }
    private void CargarFecha()
    {
        //hoy = DateTime.Now.ToShortDateString();

    }
    private void SelectTamano()
    {


    }

}
